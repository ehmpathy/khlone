# block 0: BrainCli — execution tracker

## phase 0: scaffold + deps
- [ ] install `@lydell/node-pty` as dev dep (pinned version)
- [ ] confirm `test-fns` is at 1.15.0+ (needs `genTempDir`)
- [ ] create `src/_topublish/rhachet/` directory
- [ ] create `src/_topublish/rhachet/__test__/` directory
- [ ] create `src/_topublish/rhachet-brains-anthropic/__test__/` directory (if absent)
- [ ] confirm `npm run test:types` passes with no new errors

## phase 1: contract types
- [ ] create `src/_topublish/rhachet/BrainCli.ts`
- [ ] create `src/_topublish/rhachet/getOneSupplierSlugFromBrainSlug.ts`
- [ ] create `src/_topublish/rhachet/__test__/getOneSupplierSlugFromBrainSlug.test.ts`
- [ ] create `src/_topublish/rhachet/index.ts`

## phase 2: supplier config
- [ ] create `src/_topublish/rhachet-brains-anthropic/BrainCli.config.ts`

## phase 3: arg assembly
- [ ] create `src/_topublish/rhachet-brains-anthropic/getOneDispatchArgs.ts`
- [ ] create `src/_topublish/rhachet-brains-anthropic/getOneInteractArgs.ts`
- [ ] create `src/_topublish/rhachet-brains-anthropic/__test__/getOneDispatchArgs.test.ts`
- [ ] create `src/_topublish/rhachet-brains-anthropic/__test__/getOneInteractArgs.test.ts`

## phase 4: stream parser
- [ ] create `src/_topublish/rhachet-brains-anthropic/getOneBrainOutputFromStreamJson.ts`
- [ ] create `src/_topublish/rhachet-brains-anthropic/__test__/getOneBrainOutputFromStreamJson.test.ts`

## phase 5: supplier factory
- [ ] create `src/_topublish/rhachet-brains-anthropic/genBrainCli.ts`

## phase 6: contract factory
- [ ] create `src/_topublish/rhachet/genBrainCli.ts`
- [ ] update `src/_topublish/rhachet/index.ts` — export genBrainCli

## phase 7: supplier index
- [ ] update `src/_topublish/rhachet-brains-anthropic/index.ts`

## phase 8: integration tests
- [ ] create `src/_topublish/rhachet-brains-anthropic/__test__/genBrainCli.integration.test.ts`

## phase 9: final verification
- [ ] `npm run test:types`
- [ ] `npm run test:unit`
- [ ] `npm run test:integration -- genBrainCli.integration`
- [ ] file inventory audit (16 files)
